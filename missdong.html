<!doctype>
<html>
<head>
<title>董小姐 implemented javascript</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<script src="base64binary.js"></script>
<script src="acoustic_grand_piano-ogg.js"></script>
<script src="midi.js"></script>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div id="tablature">
  <div id="line1" class="line">
    <div id="cv2" class="cover"></div>
    <div id="cv3" class="cover"></div>
    <div id="cv4" class="cover"></div>
    <div id="cv8" class="cover"></div>
    <div id="cv9" class="cover"></div>
    <div id="cv10" class="cover"></div>
  </div>
  <div id="line2" class="line">
    <div id="cv11" class="cover"></div>
    <div id="cv12" class="cover"></div>
    <div id="cv13" class="cover"></div>
    <div id="cv14" class="cover"></div>
    <div id="cv15" class="cover"></div>
    <div id="cv17" class="cover"></div>
    <div id="cv19" class="cover"></div>
    <div id="cv20" class="cover"></div>
    <div id="cv21" class="cover"></div>
    <div id="cv22" class="cover"></div>
    <div id="cv23" class="cover"></div>
    <div id="cv24" class="cover"></div>
    <div id="cv25" class="cover"></div>
    <div id="cv27" class="cover"></div>
    <div id="cv28" class="cover"></div>
    <div id="cv29" class="cover"></div>
    <div id="cv30" class="cover"></div>
    <div id="cv31" class="cover"></div>
  </div>
  <div id="line3" class="line">
    <div id="cv36" class="cover"></div>
    <div id="cv37" class="cover"></div>
    <div id="cv38" class="cover"></div>
    <div id="cv42" class="cover"></div>
    <div id="cv43" class="cover"></div>
    <div id="cv44" class="cover"></div>
    <div id="cv45" class="cover"></div>
    <div id="cv46" class="cover"></div>
    <div id="cv47" class="cover"></div>
    <div id="cv48" class="cover"></div>
    <div id="cv49" class="cover"></div>
    <div id="cv50" class="cover"></div>
    <div id="cv52" class="cover"></div>
    <div id="cv54" class="cover"></div>
    <div id="cv55" class="cover"></div>
    <div id="cv56" class="cover"></div>
    <div id="cv57" class="cover"></div>
    <div id="cv58" class="cover"></div>
    <div id="cv60" class="cover"></div>
    <div id="cv62" class="cover"></div>
    <div id="cv63" class="cover"></div>
    <div id="cv64" class="cover"></div>
    <div id="cv65" class="cover"></div>
  </div>
  <div id="line4" class="line">
    <div id="cv70" class="cover"></div>
    <div id="cv71" class="cover"></div>
    <div id="cv72" class="cover"></div>
    <div id="cv76" class="cover"></div>
    <div id="cv77" class="cover"></div>
    <div id="cv78" class="cover"></div>
    <div id="cv79" class="cover"></div>
    <div id="cv80" class="cover"></div>
    <div id="cv81" class="cover"></div>
    <div id="cv82" class="cover"></div>
    <div id="cv83" class="cover"></div>
    <div id="cv85" class="cover"></div>
    <div id="cv87" class="cover"></div>
    <div id="cv88" class="cover"></div>
    <div id="cv89" class="cover"></div>
    <div id="cv90" class="cover"></div>
    <div id="cv91" class="cover"></div>
    <div id="cv93" class="cover"></div>
    <div id="cv94" class="cover"></div>
    <div id="cv95" class="cover"></div>
    <div id="cv96" class="cover"></div>
    <div id="cv97" class="cover"></div>
    <div id="cv98" class="cover"></div>
    <div id="cv99" class="cover"></div>
  </div>
  <div id="line5" class="line">
    <div id="cv101" class="cover"></div>
    <div id="cv106" class="cover"></div>
    <div id="cv107" class="cover"></div>
    <div id="cv108" class="cover"></div>
    <div id="cv111" class="cover"></div>
    <div id="cv112" class="cover"></div>
    <div id="cv113" class="cover"></div>
    <div id="cv114" class="cover"></div>
    <div id="cv116" class="cover"></div>
    <div id="cv117" class="cover"></div>
    <div id="cv118" class="cover"></div>
    <div id="cv119" class="cover"></div>
    <div id="cv121" class="cover"></div>
    <div id="cv123" class="cover"></div>
    <div id="cv124" class="cover"></div>
    <div id="cv125" class="cover"></div>
  </div>
  <div id="line6" class="line">
    <div id="cv126" class="cover"></div>
    <div id="cv128" class="cover"></div>
    <div id="cv129" class="cover"></div>
    <div id="cv130" class="cover"></div>
    <div id="cv131" class="cover"></div>
    <div id="cv132" class="cover"></div>
    <div id="cv134" class="cover"></div>
    <div id="cv136" class="cover"></div>
    <div id="cv140" class="cover"></div>
    <div id="cv141" class="cover"></div>
    <div id="cv142" class="cover"></div>
    <div id="cv143" class="cover"></div>
    <div id="cv144" class="cover"></div>
    <div id="cv146" class="cover"></div>
    <div id="cv147" class="cover"></div>
    <div id="cv148" class="cover"></div>
    <div id="cv149" class="cover"></div>
    <div id="cv150" class="cover"></div>
  </div>
  <div id="line7" class="line">
    <div id="cv152" class="cover"></div>
    <div id="cv153" class="cover"></div>
    <div id="cv154" class="cover"></div>
    <div id="cv155" class="cover"></div>
    <div id="cv159" class="cover"></div>
    <div id="cv160" class="cover"></div>
    <div id="cv161" class="cover"></div>
    <div id="cv162" class="cover"></div>
    <div id="cv163" class="cover"></div>
    <div id="cv164" class="cover"></div>
    <div id="cv165" class="cover"></div>
    <div id="cv167" class="cover"></div>
    <div id="cv168" class="cover"></div>
    <div id="cv170" class="cover"></div>
    <div id="cv171" class="cover"></div>
    <div id="cv172" class="cover"></div>
    <div id="cv173" class="cover"></div>
    <div id="cv174" class="cover"></div>
  </div>
  <div id="line8" class="line">
    <div id="cv178" class="cover"></div>
    <div id="cv179" class="cover"></div>
    <div id="cv180" class="cover"></div>
    <div id="cv181" class="cover"></div>
    <div id="cv182" class="cover"></div>
    <div id="cv184" class="cover"></div>
    <div id="cv186" class="cover"></div>
    <div id="cv187" class="cover"></div>
    <div id="cv188" class="cover"></div>
    <div id="cv189" class="cover"></div>
    <div id="cv190" class="cover"></div>
    <div id="cv191" class="cover"></div>
    <div id="cv192" class="cover"></div>
    <div id="cv193" class="cover"></div>
    <div id="cv195" class="cover"></div>
    <div id="cv197" class="cover"></div>
    <div id="cv198" class="cover"></div>
    <div id="cv199" class="cover"></div>
    <div id="cv200" class="cover"></div>
    <div id="cv201" class="cover"></div>
    <div id="cv202" class="cover"></div>
    <div id="cv204" class="cover"></div>
    <div id="cv206" class="cover"></div>
    <div id="cv207" class="cover"></div>
    <div id="cv208" class="cover"></div>
  </div>
  <div id="line9" class="line">
    <div id="cv213" class="cover"></div>
    <div id="cv214" class="cover"></div>
    <div id="cv215" class="cover"></div>
    <div id="cv216" class="cover"></div>
    <div id="cv217" class="cover"></div>
    <div id="cv218" class="cover"></div>
    <div id="cv220" class="cover"></div>
    <div id="cv222" class="cover"></div>
    <div id="cv223" class="cover"></div>
    <div id="cv224" class="cover"></div>
  </div>
  <div id="line10" class="line">
    <div id="cv245" class="cover"></div>
    <div id="cv246" class="cover"></div>
    <div id="cv247" class="cover"></div>
    <div id="cv249" class="cover"></div>
    <div id="cv251" class="cover"></div>
    <div id="cv252" class="cover"></div>
    <div id="cv253" class="cover"></div>
  </div>
</div>
<div id="top">
  <div id="fork-wrap">
    <div id="fork"></div>
  </div>
</div>
<script>
document.addEventListener('midi:init', function(){
  var baseNote = 50;
  var h = 0.5;
  var hm = 0.75;
  var q = 0.25;
  var dong = [
    0, [5, h], [8, q], [6, q], [6, h], [0, h], [0, q], [5, q], [6, q], [5, q],
    [7, h], [5, h], [5, h], [6, q], [5, q], [5, q], [3, hm], [0, q], [2, q], [3, q], [2, q],
    [5, h], [2, q], [5, q], 5, [0, hm], [2, q], [5, hm], [2, q],
    [5, q], [3, hm], 0, 0, 0,
    0, [5, h], [8, q], [6, q], [6, h], [0, h], [0, q], [5, q], [7, q], [5, q], 
    [7, q], [5, h], [5, q], [7, h], [5, q], [7, q], [7, q], [6, hm], [0, h], [5, q], [5, q],
    [6, h], [5, q], [6, q], [6, q], [5, hm], 0, [3, q], [2, h], [1, q],
    1, 0, 0, 0,
    0, [5, h], [8, q], [6, q], [6, h], [0, h], [0, h], [6, q], [6, q],
    [7, q], [7, hm], [7, h], [5, q], [7, q], [7, q], [6, q], [6, h], [0, h], [3, q], [5, q],
    [6, h], [5, q], [6, q], [5, q], [5, hm], [6, q], [5, h], [2, q], [2, h], [5, q], [5, q],
    [5, q], [3, hm], 0, 0, 0,
    
    0, [5, h], [8, q], [6, q], [6, h], [0, h], [6, q], [7, h], [7, q], 
    [7, q], [5, q], [5, h], [8, h], [9, q], [8, q], [8, q], [6, hm], [0, q], [5, q], [6, q], [5, q],
    6, [0, q], [5, q], [6, q], [6, q], [5, hm], [7, q], [7, h], [7, q], [8, q], 
    [8, 2], 0, 0, 
    [0, h], [10, q], [10, q], [10, h], [9, q], [9, q], [10, q], [9, h], [9, q], [9, h], [8, q], [10, q],
    [10, q], [10, hm], [5, h], [8, q], [6, q], [6, h], [0, h], [0, hm], [5, q], 
    [10, h], [10, q], [9, q], [10, h], [9, q], [10, q], [10, q], [9, h], [9, q], [8, q], [8, h], [5, q],
    [5, q], [10, h], [10, q], 10, 0, 0,
    [10, h], [6, h], [10, h], [12, q], [10, q], [10, q], [9, hm], [0, q], [8, q], [8, q], [9, q],
    [10, h], [5, h], [10, h], [9, q], [5, q], [5, q], [6, hm], [0, q], [6, q], [6, q], [5, q],
    [5, h], [5, q], [8, q], [8, q], [8, hm], 0, [5, h], [8, q], [8, q],
    1, 0, 0, [0, q], [6, q], [6, q], [5, q],
    [5, h], [5, q], [8, q], [8, q], [8, hm], 0, [5, h], [8, q], [8, q],
    1, 0, 0, 0];
  var music = dong;
  for(var i in music){
    if(music[i] instanceof Array){
      music[i][0] += music[i][0] + (music[i][0] > 0 ? baseNote: 0);
    } else {
      music[i] += music[i] + (music[i] > 0 ? baseNote: 0);
    }
  }
  var count = 0;
  MIDI.setTempo(60)
    .pushNotes(music)
    .setCallback(function(){
      count ++;
      var ele = document.getElementById('cv' + count);
      if(ele)
        ele.style.display = "block";
      console.log(count);
    })
    .start();
});

</script>
</body>
</html>